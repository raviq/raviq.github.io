
:root{
  --bg:#0e1014; --panel:#151926; --text:#e8eaf0; --muted:#a9b2c7;
  --line:rgba(255,255,255,.08);
  --brand:#63a6ff; --brand2:#44d89e;
  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.25);
  --maxw:1280px;
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#ffffff; --panel:#f6f7fb; --text:#10131a; --muted:#5d667b;
    --line:rgba(0,0,0,.08);
    --brand:#2b59ff; --brand2:#16a16e;
    --shadow:0 10px 28px rgba(0,0,0,.08);
  }
}
*{box-sizing:border-box} html,body{margin:0;padding:0}
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); color:var(--text); line-height:1.7}

.container{max-width:var(--maxw); margin:0 auto; padding:0 12px}

.header{position:sticky; top:0; z-index:30; backdrop-filter:saturate(180%) blur(10px); background:rgba(14,16,20,.6); border-bottom:1px solid var(--line)}
@media (prefers-color-scheme: light){ .header{background:rgba(255,255,255,.7)} }
.header-inner{display:flex; align-items:center; justify-content:space-between; gap:24px; padding:14px 0}
.brand{display:flex; flex-direction:column; text-decoration:none; color:var(--text)}
.brand-name{font-weight:800; letter-spacing:.2px}
.brand-role{font-size:.95rem; color:var(--muted)}
.nav-toggle{display:none; background:transparent; border:0; color:var(--text); font-size:24px}
.nav ul{display:flex; list-style:none; gap:18px; margin:0; padding:0}
.nav a{display:block; padding:10px 12px; text-decoration:none; color:var(--text); border-radius:10px}
.nav a:hover{background:rgba(255,255,255,.06)}
@media (max-width:900px){
  .nav{display:none; position:absolute; right:20px; top:70px; background:var(--panel); border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow)}
  .nav.open{display:block}
  .nav ul{flex-direction:column; padding:10px}
  .nav-toggle{display:block}
}

.hero{padding:72px 0 40px; background:linear-gradient(120deg, rgba(99,166,255,.15), rgba(68,216,158,.1)); border-bottom:1px solid var(--line)}
.hero-inner{display:grid; grid-template-columns: 1.2fr .8fr; gap:40px; align-items:center}
.hero h1{font-size:clamp(28px, 3.4vw, 44px); line-height:1.2; margin:0 0 10px}
.lead{color:var(--muted); margin:0 0 20px}
.hero-art img{width:100%; border-radius:18px; box-shadow:var(--shadow)}
@media (max-width:900px){ .hero-inner{grid-template-columns:1fr} }

.section{padding:56px 0}
.section-head{display:flex; align-items:baseline; justify-content:space-between; gap:20px; margin-bottom:16px}
.section-title{font-size:clamp(20px, 2.2vw, 28px); margin:0}
.section-subtitle{margin:0; color:var(--muted)}
.card{background:var(--panel); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:22px}
.prose p{margin:0 0 12px}
.prose a{color:var(--brand); text-decoration:none}
.prose a:hover{text-decoration:underline}
.two-cols{columns:2; column-gap:28px}
@media (max-width:900px){ .two-cols{columns:1} }

.grid{display:grid; grid-template-columns: repeat( auto-fit, minmax(260px, 1fr) ); gap:16px}
.grid-2{display:grid; grid-template-columns: repeat(2, 1fr); gap:20px}
.grid-3{display:grid; grid-template-columns: repeat(3, 1fr); gap:16px}
@media (max-width:900px){ .grid-2, .grid-3{grid-template-columns:1fr} }

.metric{display:flex; flex-direction:column; align-items:flex-start}
.metric-value{font-weight:800; font-size:28px}
.metric-label{color:var(--muted)}

.project-card .project-title{margin:0 0 8px; font-size:18px}

.timeline{position:relative}
.timeline:before{content:""; position:absolute; left:14px; top:0; bottom:0; width:2px; background:var(--line)}
.timeline .timeline-item{position:relative; padding-left:36px; margin-bottom:16px}
.timeline .timeline-item:before{content:""; position:absolute; left:7px; top:8px; width:12px; height:12px; border-radius:50%; background:var(--brand)}

.socials{display:flex; flex-wrap:wrap; gap:10px}
.chip{display:inline-block; padding:8px 12px; border-radius:999px; border:1px solid var(--line); text-decoration:none; color:var(--text)}
.chip:hover{border-color:var(--brand)}

.accordion-item{border:1px solid var(--line); border-radius:14px; margin-bottom:10px; overflow:hidden; background:transparent}
.accordion-trigger{width:100%; text-align:left; background:var(--panel); color:var(--text); border:0; padding:14px 16px; font-weight:600; display:flex; justify-content:space-between; align-items:center}
.accordion-panel{max-height:0; overflow:hidden; transition:max-height .35s ease}
.accordion-item[open] .accordion-panel{max-height:900px}
.icon{opacity:.65}

.button{display:inline-block; padding:10px 14px; border-radius:12px; background:linear-gradient(135deg, var(--brand), var(--brand2)); color:white; text-decoration:none; font-weight:600; box-shadow:var(--shadow)}
.button:hover{opacity:.95}

.footer{padding:28px 0; border-top:1px solid var(--line)}
.footer-inner{display:flex; align-items:center; justify-content:space-between; color:var(--muted)}
.muted{color:var(--muted); text-decoration:none}
.muted:hover{color:var(--text)}


.compact-projects {
  list-style: none;
  padding: 0;
  margin: 0;
}
.compact-projects li {
  margin: 6px 0;
}
.compact-projects a {
  color: var(--brand);
  text-decoration: none;
}
.compact-projects a:hover {
  text-decoration: underline;
}


/* Nav link underline animation */
.nav a{
  position:relative;
  transition:color .2s ease;
}
.nav a::after{
  content:"";
  position:absolute; left:12px; right:12px; bottom:6px;
  height:2px; background:linear-gradient(90deg, var(--brand), var(--brand2));
  transform:scaleX(0); transform-origin:left; transition:transform .25s ease;
}
.nav a:hover::after{ transform:scaleX(1) }
.nav a.active{ color: var(--brand) }
.nav a.active::after{ transform:scaleX(1) }

/* Projects external link icon and tagline */
.compact-projects .ext{ font-size:.85em; margin-left:6px; opacity:.8 }
.compact-projects .tagline{ color: var(--muted); font-size:.95rem; margin-top:2px }


#backToTop {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--brand);
  color: white;
  border: none;
  border-radius: 50%;
  width: 44px;
  height: 44px;
  font-size: 20px;
  display: none;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: var(--shadow);
  z-index: 50;
}
#backToTop.show { display: flex; }
@media (min-width: 901px){
  #backToTop{ display:none !important; }
}


/* Header socials: tidy horizontal row under your name */
.header .socials {
  display: flex;
  gap: 10px;
  margin-top: 6px;
  flex-wrap: wrap;
}
.header .socials a {
  width: 36px; height: 36px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 999px;
  border: 1px solid var(--line);
  text-decoration: none;
  transition: transform .15s ease, background .2s ease, border-color .2s ease;
  color: inherit;
}
.header .socials a i { font-size: 18px; line-height: 1; }
.header .socials a:hover {
  background: linear-gradient(135deg, var(--brand), var(--brand2));
  border-color: transparent;
  transform: translateY(-1px);
  color: #fff;
}
.header .socials a:focus-visible {
  outline: 2px solid var(--brand); outline-offset: 2px;
}
i.ai { font-size: 18px; }

/* Footer/Contact socials */
.footer .socials, .section-body .socials {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 10px;
}
.footer .socials a, .section-body .socials a {
  width: 32px; height: 32px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 999px;
  border: 1px solid var(--line);
  text-decoration: none;
  transition: transform .15s ease, background .2s ease, border-color .2s ease;
  color: inherit;
}
.footer .socials a:hover, .section-body .socials a:hover {
  background: linear-gradient(135deg, var(--brand), var(--brand2));
  border-color: transparent;
  transform: translateY(-1px);
  color: #fff;
}
.footer .socials a:focus-visible, .section-body .socials a:focus-visible {
  outline: 2px solid var(--brand); outline-offset: 2px;
}


/* Header socials in top-right next to nav */
.header-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
}
.header .socials {
  display: flex;
  gap: 10px;
}
.header .socials a {
  width: 34px; height: 34px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 999px;
  border: 1px solid var(--line);
  text-decoration: none;
  transition: transform .15s ease, background .2s ease, border-color .2s ease, color .2s ease;
  color: var(--text);
}
.header .socials a i { font-size: 18px; line-height: 1; }
.header .socials a:hover {
  background: linear-gradient(135deg, var(--brand), var(--brand2));
  border-color: transparent;
  transform: translateY(-1px);
  color: #fff;
}
.header .socials a:focus-visible {
  outline: 2px solid var(--brand); outline-offset: 2px;
}


/* Vertical social bar (desktop only) */
.social-bar {
  position: fixed;
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 100;
}
.social-bar a {
  width: 36px; height: 36px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 999px;
  border: 1px solid var(--line);
  color: var(--text);
  transition: transform 0.15s ease, background 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}
.social-bar a:hover {
  background: linear-gradient(135deg, var(--brand), var(--brand2));
  border-color: transparent;
  color: #fff;
  transform: translateX(2px);
}
.social-bar a:focus-visible {
  outline: 2px solid var(--brand);
  outline-offset: 2px;
}
i.ai { font-size: 18px; }
@media (max-width: 900px) {
  .social-bar { display: none; }
}



.news-list { list-style:none; padding:0; margin:0 0 8px; }
.news-list li { margin: 8px 0; }
.news-list time { display:inline-block; min-width: 90px; color: var(--muted); }


.news-list a.muted { margin-left: 4px; white-space: nowrap; }


@media (max-width: 600px){
  .container{ padding: 0 16px; }
}


/* Publications controls */
.pub-controls{ display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:16px }
.pub-jump{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
.pub-jump .chip{ display:inline-block; padding:6px 10px; border:1px solid var(--line); border-radius:999px; text-decoration:none; color:var(--text) }
.pub-jump .chip:hover{ border-color: var(--brand) }
.pub-filter{ display:flex; gap:10px; align-items:center }
#pubFilter{ flex:1; min-width:220px; padding:8px 10px; border-radius:10px; border:1px solid var(--line); background:transparent; color:var(--text) }
#pubYearSelect{ padding:8px 10px; border-radius:10px; border:1px solid var(--line); background:transparent; color:var(--text) }
.sm{ font-size:.9rem }

/* Featured publications */
.featured-pubs{ margin-bottom:16px }
.featured-pubs h3{ margin-top:0 }
.pub-card{ background:var(--panel); border:1px solid var(--line); border-radius:14px; padding:16px }
.pub-card h4{ margin:0 0 6px; font-size:1.05rem }
.pub-card h4 a{ color: var(--text); text-decoration:none }
.pub-card h4 a:hover{ color: var(--brand) }
.pub-meta{ color: var(--muted); font-size:.95rem; margin-bottom:8px }
.badges{ display:flex; gap:8px; flex-wrap:wrap }
.badge{ display:inline-block; padding:6px 10px; border-radius:999px; border:1px solid var(--line); text-decoration:none; color:var(--text) }
.badge:hover{ border-color: var(--brand); color: var(--brand) }


/* Skip link */
.skip-link{
  position:absolute; left:-999px; top:auto;
  width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  position:fixed; left:16px; top:16px;
  width:auto; height:auto; padding:8px 10px;
  background:var(--panel); color:var(--text);
  border:1px solid var(--line); border-radius:8px; z-index:9999;
}
/* Visually hidden but accessible */
.visually-hidden{
  position:absolute!important; width:1px!important; height:1px!important;
  padding:0!important; margin:-1px!important; overflow:hidden!important; clip:rect(0 0 0 0)!important; white-space:nowrap!important; border:0!important;
}
/* Ghost button variant */
.button.ghost{
  background:transparent; color:var(--text);
  border:1px solid var(--line);
}
.button.ghost:hover{ border-color: var(--brand); color: var(--brand) }

/* Print styles to turn page into a CV */
@media print{
  :root{ --bg:#ffffff; --text:#000000 }
  body{ background:#fff; color:#000; }
  .header, .footer, .social-bar, .nav-toggle, .print-cv { display:none !important; }
  .section{ page-break-inside: avoid; }
  a[href]:after{ content:" (" attr(href) ")"; font-size: .9em; }
  /* Number publications */
  .pub-years ul{ counter-reset: pub; }
  .pub-years ul > li{ counter-increment: pub; }
  .pub-years ul > li::marker{ content: counter(pub) ". "; }
}


/* --- UX Polish --- */

/* Theme toggle button */
.icon-btn{ background:transparent; border:1px solid var(--line); color:var(--text);
  border-radius:12px; padding:8px 10px; cursor:pointer; transition:.2s }
.icon-btn:hover{ border-color: var(--brand); color: var(--brand) }
.theme-toggle i{ font-size:18px; display:block }

/* Explicit theme overrides: take precedence over prefers-color-scheme */
:root[data-theme="light"]{
  --bg:#ffffff; --panel:#f6f7fb; --text:#10131a; --muted:#5d667b; --line:rgba(0,0,0,.08);
  --brand:#2b59ff; --brand2:#16a16e; --shadow:0 10px 28px rgba(0,0,0,.08);
}
:root[data-theme="dark"]{
  --bg:#0e1014; --panel:#151926; --text:#e8eaf0; --muted:#a9b2c7; --line:rgba(255,255,255,.08);
  --brand:#63a6ff; --brand2:#44d89e; --shadow:0 10px 30px rgba(0,0,0,.25);
}

/* Mobile nav: slide-in panel + overlay */
.nav-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:saturate(120%) blur(2px);
  display:none; z-index:40; }
.nav-overlay.show{ display:block }
@media (max-width:900px){
  .nav{ position:fixed; top:0; right:0; height:100%; width:80vw; max-width:360px;
    background:var(--panel); border-left:1px solid var(--line); border-radius:0; box-shadow:var(--shadow);
    transform:translateX(100%); transition:transform .25s ease; z-index:50; }
  .nav.open{ transform:translateX(0) }
  .nav ul{ padding:14px }
  body.menu-open{ overflow:hidden } /* scroll lock */
}

/* Publications sticky mini sub-nav */
.pub-subnav{ position:sticky; top:70px; z-index:5; margin-bottom:12px }
.pub-subnav .pub-subnav-inner{ display:flex; gap:8px; overflow:auto; padding:8px;
  border:1px solid var(--line); border-radius:12px; background:rgba(0,0,0,.06) }
@media (prefers-color-scheme:light){
  .pub-subnav .pub-subnav-inner{ background:rgba(255,255,255,.6) }
}
.pub-subnav .chip{ display:inline-block; padding:6px 10px; border:1px solid var(--line);
  border-radius:999px; text-decoration:none; color:var(--text); white-space:nowrap }
.pub-subnav .chip:hover{ border-color: var(--brand) }


/* Services */
.service-block h3{ margin: 12px 0 6px; }
.service-list{ list-style: none; margin: 0 0 10px; padding: 0; }
.service-list li{ padding: 8px 0; border-top: 1px solid var(--line); }
.service-list li:first-child{ border-top: 0; }
.service-list a{ color: var(--text); text-decoration: none; }
.service-list a:hover{ color: var(--brand); text-decoration: underline; }


/* Talks */
.talk-list{ list-style:none; margin:0; padding:0 }
.talk-list li{ padding:10px 0; border-top:1px solid var(--line) }
.talk-list li:first-child{ border-top:0 }
.talk-title{ font-weight:600 }
.talk-event{ color: var(--muted) }
.talk-event-link{ color: var(--muted); text-decoration: none; }
.talk-event-link:hover{ color: var(--brand); text-decoration: underline; }


/* Publications new layout */
.subhead{ margin: 12px 0 6px; font-size: 1.05rem; }
.pub-list{ margin: 0 0 14px; padding-left: 1.4rem; }
.pub-list li{ margin-bottom: 8px; }
.pub-list a{ text-decoration: none; color: var(--text); border-bottom: 1px dotted var(--line); }
.pub-list a:hover{ color: var(--brand); border-bottom-color: var(--brand); }


/* Publications: year anchors */
.year{ margin: 18px 0 6px; font-weight: 700; letter-spacing: .3px; }


/* Publications: year jump bar */
.pub-yearbar{ position:sticky; top:70px; z-index:6; margin:6px 0 12px; }
.pub-yearbar-inner{ display:flex; gap:8px; flex-wrap:wrap; padding:8px; border:1px solid var(--line); border-radius:12px; background:rgba(0,0,0,.06) }
@media (prefers-color-scheme:light){
  .pub-yearbar-inner{ background:rgba(255,255,255,.6) }
}
.pub-yearbar .chip{ display:inline-block; padding:6px 10px; border:1px solid var(--line); border-radius:999px; text-decoration:none; color:var(--text); }
.pub-yearbar .chip:hover{ border-color: var(--brand); color: var(--brand); }

/* offset anchors so headings don't sit under sticky header */
.year-target{ position:relative; top:-80px; height:0; }


/* Publications (bulleted, year groups) */
.pub-list{ list-style: disc; margin: 0 0 14px; padding-left: 1.4rem; }
.pub-list li{ margin-bottom: 8px; }


/* Safety: hide empty li if any slip through */
.pub-list li:empty{ display:none; }


/* Publications v2 */
.pub-toolbar{ display:flex; gap:12px; margin:0 0 8px; align-items:center }
#pub-search{ flex:1; padding:10px 12px; border:1px solid var(--line); background:transparent; border-radius:10px; color:var(--text); }
#pub-search::placeholder{ color: var(--muted) }
.pub-yearbar{ position:sticky; top:70px; z-index:6; margin:6px 0 12px; }
.pub-yearbar-inner{ display:flex; gap:8px; flex-wrap:wrap; padding:8px; border:1px solid var(--line); border-radius:12px; background:rgba(0,0,0,.06) }
@media (prefers-color-scheme:light){
  .pub-yearbar-inner{ background:rgba(255,255,255,.6) }
}
.pub-yearbar .chip{ display:inline-block; padding:6px 10px; border:1px solid var(--line); border-radius:999px; text-decoration:none; color:var(--text); }
.pub-yearbar .chip:hover{ border-color: var(--brand); color: var(--brand); }

.year{ margin: 18px 0 6px; font-weight: 700; letter-spacing: .3px; }
.pub-list{ list-style: disc; margin: 0 0 14px; padding-left: 1.4rem; }
.pub-list li{ margin-bottom: 8px; position: relative; }
.pub-list li .permalink{ margin-left:8px; opacity:.5; text-decoration:none }
.pub-list li .permalink:hover{ opacity:1; }

.pub-venue{ font-style: italic; }
.badges{ margin-left:.5rem; display:inline-flex; gap:6px; flex-wrap:wrap; vertical-align:middle }
.badge{ font-size:12px; line-height:1; padding:3px 8px; border:1px solid var(--line); border-radius:999px; color:var(--muted); text-decoration:none; background:transparent }
.badge:hover{ color:var(--brand); border-color:var(--brand) }
.badge-award{ color:var(--brand2); border-color:var(--brand2) }
.badge-cite{ cursor:pointer }

/* collapse older years */
.pub-list[data-collapsed] li:nth-child(n+3){ display:none; }
.show-more{ margin: -6px 0 14px 1.4rem; border:1px solid var(--line); background:transparent; color:var(--text); border-radius:8px; padding:6px 10px; }
.show-more:hover{ border-color: var(--brand); color: var(--brand); }

/* Cite popover */
.cite-pop{ position:absolute; max-width:min(720px, 92vw); background:rgba(0,0,0,.9); color:#fff; padding:12px; border:1px solid var(--line); border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.35) }
.cite-pop pre{ white-space:pre-wrap; margin:6px 0 12px; font-size:12px }
.cite-row{ display:flex; justify-content:space-between; align-items:center; gap:12px }
.cite-row button{ border:1px solid var(--line); background:transparent; color:#fff; padding:4px 8px; border-radius:8px }
.cite-row button:hover{ border-color: var(--brand); color: var(--brand) }

/* Safety: hide empty li if any slip through */
.pub-list li:empty{ display:none; }


/* Toolbars & export */
.proj-toolbar,.news-toolbar{ display:flex; justify-content:flex-end; margin:0 0 8px }
.badge-export{ cursor:pointer }
.export-menu{ margin-left:auto; position:relative }
.export-pop{ position:absolute; right:0; margin-top:6px; border:1px solid var(--line); background:rgba(0,0,0,.9); color:#fff; border-radius:10px; padding:6px; display:flex; gap:6px }
.export-pop[hidden]{ display:none }
.export-pop button{ border:1px solid var(--line); background:transparent; color:#fff; padding:6px 10px; border-radius:8px }
.export-pop button:hover{ border-color: var(--brand); color: var(--brand) }

